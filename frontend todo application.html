<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script>

function deletedone(){
    console.log("Delete done")
    
    //add this delete dynamically its deleted from this,list
}
function deletetodo(id){
        console.log(id);
         fetch("http://localhost:3000/todos/"+id ,
        { 
            method:"DELETE",
            headers:
        {
            "Content-Type": "application/json"
        }
    }).then(deletedone);

    }
 
function todoscallback(data){
        console.log(data);
        var parentelement=document.getElementById("mainarea");
        // parentelement.innerHTML=JSON.stringify(data);
        for(var i=0;i<data.length;i++){
            var childelement=document.createElement("div");

            var grandchild1=document.createElement("span")
            grandchild1.innerHTML=data[i].title;

            var grandchild2=document.createElement("span")
            grandchild2.innerHTML=data[i].description;

            var grandchild3=document.createElement("button")
            grandchild3.innerHTML="Delete"
            grandchild3.setAttribute("onclick","deletetodo("+ data[i].id+")")

            childelement.appendChild(grandchild1);
            childelement.appendChild(grandchild2);
            childelement.appendChild(grandchild3);

            parentelement.appendChild(childelement);
        }
        
}

function callback2(res){
    res.json().then(todoscallback)
}

function getdata(){
    fetch("http://localhost:3000/todos",{method:"GET"}).then(callback2)
};
getdata()

function parseddata(data){
    console.log(data)
    getdata();

}
    function callbackfn(res){
        res.json(parseddata)
    }
        function onPress(){
            var title=document.getElementById("title").value;
            var description=document.getElementById("description").value;
            console.log(title);
            console.log(description);

            // alert("hi...");
        fetch("http://localhost:3000/todos",
        { 
            method:"POST",
            body:JSON.stringify
            ({
            title:title,
            description:description
        }),headers:
        {
            "Content-Type": "application/json"
        }
    }).then(callbackfn);

        };



</script>
<body>
 TODO TITLE
    <input type="text" id="title"></input>
    <br><br>
    TODO DESCRIPTION
   <input type="text" id="description"></input> 
   <br><br>
   <button onclick="onPress()">send todo</button>
   <div id="mainarea">
        
   </div>

</body>
